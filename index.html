<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üß† Prompt Builder Pro</title>

  <style>
    /* ... (Manteniamo lo stile precedente) ... */
    :root {
      --bg-color: #f4f7f6; --card-bg: #ffffff; --text-color: #2c3e50;
      --primary: #007AFF; --secondary: #34C759; --accent: #5856D6;
      --fav: #FFCC00; --danger: #ff3b30; --border: #ddd;
    }
    @media (prefers-color-scheme: dark) {
      :root { --bg-color: #121212; --card-bg: #1e1e1e; --text-color: #f4f7f6; --border: #333; }
    }
    body { font-family: -apple-system, sans-serif; background: var(--bg-color); color: var(--text-color); display: flex; justify-content: center; padding: 20px; }
    .container { width: 100%; max-width: 500px; display: flex; flex-direction: column; gap: 15px; }
    select, textarea { width: 100%; padding: 12px; border-radius: 12px; border: 1px solid var(--border); background: var(--card-bg); color: var(--text-color); font-size: 16px; box-sizing: border-box; }
    textarea { height: 140px; resize: none; border-bottom: 3px solid var(--primary); }
    .button-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
    button { padding: 14px; border: none; border-radius: 12px; font-weight: bold; cursor: pointer; transition: 0.2s; }
    .btn-inspire { background: var(--accent); color: white; grid-column: span 2; }
    .btn-main { background: var(--primary); color: white; }
    .btn-copy { background: var(--secondary); color: white; }
    .btn-gpt { background: #74aa9c; color: white; font-size: 12px; grid-column: span 2; }
    .info-box { text-align: center; margin-top: 20px; font-size: 12px; opacity: 0.7; }
    .fav-item { background: var(--card-bg); padding: 8px; border-radius: 8px; margin-bottom: 5px; display: flex; justify-content: space-between; font-size: 12px; border: 1px solid var(--border); }
  </style>
</head>

<body>
  <div class="container">
    <h1>üß† Prompt Builder Pro</h1>

    <select id="typeSelect">
      <option value="text">‚úçÔ∏è Testo / Chat</option>
      <option value="image">üé® Immagine AI</option>
      <option value="video">üé• Video AI</option>
    </select>

    <textarea id="promptInput" placeholder="Clicca 'Ispirami' o scrivi qui..."></textarea>

    <div class="button-grid">
      <button class="btn-inspire" onclick="inspireMe()">üé≤ Ispirami (Mix Infinito)</button>
      <button class="btn-main" onclick="generatePrompt()">Ottimizza ‚ú®</button>
      <button class="btn-copy" onclick="copyPrompt()">Copia üìã</button>
      <button class="btn-gpt" onclick="copyGptTask()">ü§ñ Ottieni idee da ChatGPT</button>
    </div>

    <div id="favoritesList"></div>

    <div class="info-box">
      Sviluppato da <strong>Testi Francesco</strong>
    </div>
  </div>

  <script>
    const area = document.getElementById('promptInput');
    const type = document.getElementById('typeSelect');

    // SISTEMA DI GENERAZIONE SEMI-IA (COMBINATORIA)
    const data = {
      subjects: ["Un gatto", "Un astronauta", "Una citt√†", "Un antico guerriero", "Un robot", "Un paesaggio"],
      actions: ["che esplora", "che combatte contro", "immerso in", "che sogna", "che vola sopra"],
      contexts: ["una foresta di cristallo", "il deserto di Marte", "una New York cyberpunk", "un oceano di nuvole", "un buco nero"],
      styles: ["in stile acquerello", "iper-realistico", "pixel art", "stile Pixar", "cinematografico"]
    };

    function inspireMe() {
      const s = data.subjects[Math.floor(Math.random() * data.subjects.length)];
      const a = data.actions[Math.floor(Math.random() * data.actions.length)];
      const c = data.contexts[Math.floor(Math.random() * data.contexts.length)];
      const st = data.styles[Math.floor(Math.random() * data.styles.length)];
      
      area.value = `${s} ${a} ${c} ${st}`;
      saveLocal();
    }

    // FUNZIONE PER CHIEDERE A CHATGPT
    function copyGptTask() {
      const task = `Ciao ChatGPT, agisci come un esperto Prompt Designer. Generami una lista di 10 idee creative e originali per la categoria: ${type.value}. Le idee devono essere brevi e pronte per essere ottimizzate. Forniscile come elenco puntato.`;
      navigator.clipboard.writeText(task);
      alert("Comando per ChatGPT copiato! Incollalo su ChatGPT per avere idee infinite.");
    }

    function generatePrompt() {
      if (!area.value) return;
      let p = area.value;
      if(type.value === "image") p = `Image Prompt: ${p}, 8k, highly detailed, masterpieces, cinematic lighting.`;
      if(type.value === "text") p = `Agisci come un esperto. Spiega/Scrivi: ${p} in modo professionale e strutturato.`;
      area.value = p;
      saveLocal();
    }

    async function copyPrompt() {
      await navigator.clipboard.writeText(area.value);
      alert("Prompt copiato!");
    }

    function saveLocal() { localStorage.setItem('lastPrompt', area.value); }
    window.onload = () => { area.value = localStorage.getItem('lastPrompt') || ""; };
  </script>
</body>
</html>
